{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,uCAMA,MAAMC,EAAO,CACTC,OAAQC,SAASC,cAAc,SAC/BC,cAAeF,SAASC,cAAc,YACtCE,YAAaH,SAASC,cAAc,eAIlCG,EAAS,IAAIC,EAAAC,GAAJ,CAAmB,cAC5BC,EAAa,IAAI,EAAAC,EAAAC,YAEvBX,EAAKC,OAAOW,iBAAiB,UAG7BC,eAA8BC,GAM1B,GALAA,EAAMC,iBAENN,EAAWO,EAAIF,EAAMG,OAAOC,SAASC,YAAYC,MAAMC,OACvDZ,EAAWa,KAAO,EAEG,KAAjBb,EAAWO,EAGX,OAFAT,EAAAT,GAASyB,OAAOC,QAAQ,mCACxBxB,EAAKK,YAAYoB,UAAUC,IAAI,aAInC,IAEI,MAAMC,QAAalB,EAAWmB,iBAElC,GAAmB,IAAfD,EAAKE,MAOL,OANCtB,EAAAT,GAASyB,OAAOC,QAAQ,4EACzBxB,EAAKK,YAAYoB,UAAUC,IAAI,aAC/BZ,EAAMG,OAAOa,aAEb9B,EAAKI,cAAc2B,UAAY,IAKX,IAApBtB,EAAWa,OACXtB,EAAKI,cAAc2B,WAAY,EAAAC,EAAAC,iBAAgBN,EAAKO,MACpD5B,EAAO6B,UACP5B,EAAAT,GAASyB,OAAOa,QAAQ,oBAAoBT,EAAKU,qBACjDrC,EAAKK,YAAYoB,UAAUa,OAAO,a,CAEpC,MAAOC,GACLC,QAAQC,IAAI,UAAUF,I,KAnC9BvC,EAAKK,YAAYO,iBAAiB,SAyCjCC,eAAkCC,GAC/BL,EAAWa,MAAQ,EACnB,IACI,MAAMK,QAAalB,EAAWmB,iBAC9B5B,EAAKI,cAAcsC,mBAAmB,aAAa,EAAAV,EAAAC,iBAAgBN,EAAKO,OACxE5B,EAAO6B,UACPnC,EAAKK,YAAYoB,UAAUa,OAAO,aAClC,MAAQK,OAAQC,GAAe1C,SAASC,cAAc,YAAY0C,kBAAkBC,wBAEpFC,OAAOC,SAAS,CACZC,IAAkB,EAAbL,EACLM,SAAU,WAGVzC,EAAWa,MAAQ6B,KAAKC,MAAMzB,EAAKU,UAAY5B,EAAW4C,YAC1DrD,EAAKK,YAAYoB,UAAUC,IAAI,aAC/BnB,EAAAT,GAASyB,OAAO+B,KAAK,6D,CAE3B,MAAOf,GACLC,QAAQC,IAAI,UAAUF,I","sources":["src/js/btn-temp.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport { galleryTemplate } from \"./template\";\nimport { PixabayAPI } from './axios';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n    formEL: document.querySelector('#form'),\n    galleryListEl: document.querySelector('.gallery'),\n    loadMoreBtn: document.querySelector('.load-more'),\n    \n}\n\nconst simple = new SimpleLightbox('.gallery a');\nconst pixabayApi = new PixabayAPI();\n\nrefs.formEL.addEventListener('submit', onFormElSubmit);\nrefs.loadMoreBtn.addEventListener('click', onloadMoreBtnClick);\n\nasync function onFormElSubmit(event) {\n    event.preventDefault();\n\n    pixabayApi.q = event.target.elements.searchQuery.value.trim();\n    pixabayApi.page = 1;\n\n    if (pixabayApi.q === '') {\n        Notiflix.Notify.failure('Enter a word to search for');\n        refs.loadMoreBtn.classList.add('is-hidden');\n        return;\n    } \n\n    try {\n    \n        const data = await pixabayApi.getGalleryCard();\n        \n    if (data.total === 0) {\n         Notiflix.Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n        refs.loadMoreBtn.classList.add('is-hidden');\n        event.target.reset();\n\n        refs.galleryListEl.innerHTML = '';\n    \n        return;\n    }\n\n    if (pixabayApi.page === 1) {\n        refs.galleryListEl.innerHTML = galleryTemplate(data.hits);\n        simple.refresh();\n        Notiflix.Notify.success(`Hooray! We found ${data.totalHits} images.`)       \n        refs.loadMoreBtn.classList.remove('is-hidden');                  \n    } \n    } catch (err) {\n        console.log(`Error: ${err}`)\n    }\n\n\n}\n \n async function onloadMoreBtnClick(event) {\n    pixabayApi.page += 1;\n    try {\n        const data = await pixabayApi.getGalleryCard();\n        refs.galleryListEl.insertAdjacentHTML('beforeend', galleryTemplate(data.hits));\n        simple.refresh();\n        refs.loadMoreBtn.classList.remove('is-hidden');\n        const { height: cardHeight } = document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect();\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n        \n        if (pixabayApi.page >= Math.floor(data.totalHits / pixabayApi.per_page)) {\n            refs.loadMoreBtn.classList.add('is-hidden');\n            Notiflix.Notify.info('Sorry, but you have reached the end of the search results');\n        }\n    } catch (err) {\n        console.log(`Error: ${err}`)\n    }\n}"],"names":["$7Y9D8","parcelRequire","$3daf7083d2e9d7f2$var$refs","formEL","document","querySelector","galleryListEl","loadMoreBtn","$3daf7083d2e9d7f2$var$simple","$parcel$interopDefault","$fZKcF","$3daf7083d2e9d7f2$var$pixabayApi","$4CNX3","PixabayAPI","addEventListener","async","event","preventDefault","q","target","elements","searchQuery","value","trim","page","Notify","failure","classList","add","data","getGalleryCard","total","reset","innerHTML","$eIgdi","galleryTemplate","hits","refresh","success","totalHits","remove","err","console","log","insertAdjacentHTML","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","Math","floor","per_page","info"],"version":3,"file":"index.49536c47.js.map"}