{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,iEAMMC,EAAO,CACTC,OAAQC,SAASC,cAAc,SAC/BC,cAAeF,SAASC,cAAc,YACtCE,YAAaH,SAASC,cAAc,eAIlCG,EAAS,IAAIC,EAAAC,GAAJ,CAAmB,cAC5BC,EAAa,IAAI,EAAAC,EAAAC,Y,SAKRC,I,OAAAA,EAAfL,EAAAT,EAAA,CAAAS,EAAAM,GAAAC,MAAA,SAAAC,EAA8BC,G,IAchBC,E,qEAbVD,EAAME,iBAENT,EAAWU,EAAIH,EAAMI,OAAOC,SAASC,YAAYC,MAAMC,OACvDf,EAAWgB,KAAO,EAEG,KAAjBhB,EAAWU,EAAQ,C,sBACnBZ,EAAAmB,GAASC,OAAOC,QAAQ,8BACxB5B,EAAKK,YAAYwB,UAAUC,IAAI,a,oDAMZrB,EAAWsB,iB,WAEf,KAFTd,EAAIe,EAAAC,MAELC,MAAW,C,uBACf3B,EAAAmB,GAASC,OAAOC,QAAQ,4EACzB5B,EAAKK,YAAYwB,UAAUC,IAAI,aAC/Bd,EAAMI,OAAOe,QAEbnC,EAAKI,cAAcgC,UAAY,G,2BAKX,IAApB3B,EAAWgB,OACXzB,EAAKI,cAAcgC,WAAY,EAAAC,EAAAC,iBAAgBrB,EAAKsB,MACpDjC,EAAOkC,UACPjC,EAAAmB,GAASC,OAAOc,QAAQ,oBAAmCC,OAAfzB,EAAK0B,UAAU,aAC3D3C,EAAKK,YAAYwB,UAAUe,OAAO,c,kDAGlCC,QAAQC,IAAI,UAAcJ,OAAAV,EAAAe,K,2DAjCLC,MAAAC,KAAAC,U,UAuCbC,I,OAAAA,EAAf5C,EAAAT,EAAA,CAAAS,EAAAM,GAAAC,MAAA,SAAAC,EAAkCC,G,IAGrBC,EAIyBmC,EAAfC,E,yEANpB5C,EAAWgB,MAAQ,E,kBAEIhB,EAAWsB,iB,OAAxBd,EAAIe,EAAAC,KACVjC,EAAKI,cAAckD,mBAAmB,aAAa,EAAAjB,EAAAC,iBAAgBrB,EAAKsB,OACxEjC,EAAOkC,UACPxC,EAAKK,YAAYwB,UAAUe,OAAO,aACHQ,EAAAlD,SAASC,cAAc,YAAYoD,kBAAkBC,wBAA5EH,EAAuBD,EAAvBK,OAERC,OAAOC,SAAS,CACZC,IAAkB,EAAbP,EACLQ,SAAU,WAGVpD,EAAWgB,MAAQqC,KAAKC,MAAM9C,EAAK0B,UAAYlC,EAAWuD,YAC1DhE,EAAKK,YAAYwB,UAAUC,IAAI,aAC/BvB,EAAAmB,GAASC,OAAOsC,KAAK,8D,kDAGzBpB,QAAQC,IAAI,UAAcJ,OAAAV,EAAAe,K,2DAnBAC,MAAAC,KAAAC,U,CA1ClClD,EAAKC,OAAOiE,iBAAiB,U,SAGClD,G,OAAfJ,EAAcoC,MAAAC,KAAAC,U,IAF7BlD,EAAKK,YAAY6D,iBAAiB,S,SAyCClD,G,OAAnBmC,EAAkBH,MAAAC,KAAAC,U","sources":["src/js/btn-temp.js"],"sourcesContent":["import Notiflix from 'notiflix';\nimport { galleryTemplate } from \"./template\";\nimport { PixabayAPI } from './axios';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst refs = {\n    formEL: document.querySelector('#form'),\n    galleryListEl: document.querySelector('.gallery'),\n    loadMoreBtn: document.querySelector('.load-more'),\n    \n}\n\nconst simple = new SimpleLightbox('.gallery a');\nconst pixabayApi = new PixabayAPI();\n\nrefs.formEL.addEventListener('submit', onFormElSubmit);\nrefs.loadMoreBtn.addEventListener('click', onloadMoreBtnClick);\n\nasync function onFormElSubmit(event) {\n    event.preventDefault();\n\n    pixabayApi.q = event.target.elements.searchQuery.value.trim();\n    pixabayApi.page = 1;\n\n    if (pixabayApi.q === '') {\n        Notiflix.Notify.failure('Enter a word to search for');\n        refs.loadMoreBtn.classList.add('is-hidden');\n        return;\n    } \n\n    try {\n    \n        const data = await pixabayApi.getGalleryCard();\n        \n    if (data.total === 0) {\n         Notiflix.Notify.failure('Sorry, there are no images matching your search query. Please try again.');\n        refs.loadMoreBtn.classList.add('is-hidden');\n        event.target.reset();\n\n        refs.galleryListEl.innerHTML = '';\n    \n        return;\n    }\n\n    if (pixabayApi.page === 1) {\n        refs.galleryListEl.innerHTML = galleryTemplate(data.hits);\n        simple.refresh();\n        Notiflix.Notify.success(`Hooray! We found ${data.totalHits} images.`)       \n        refs.loadMoreBtn.classList.remove('is-hidden');                  \n    } \n    } catch (err) {\n        console.log(`Error: ${err}`)\n    }\n\n\n}\n \n async function onloadMoreBtnClick(event) {\n    pixabayApi.page += 1;\n    try {\n        const data = await pixabayApi.getGalleryCard();\n        refs.galleryListEl.insertAdjacentHTML('beforeend', galleryTemplate(data.hits));\n        simple.refresh();\n        refs.loadMoreBtn.classList.remove('is-hidden');\n        const { height: cardHeight } = document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect();\n\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n        \n        if (pixabayApi.page >= Math.floor(data.totalHits / pixabayApi.per_page)) {\n            refs.loadMoreBtn.classList.add('is-hidden');\n            Notiflix.Notify.info('Sorry, but you have reached the end of the search results');\n        }\n    } catch (err) {\n        console.log(`Error: ${err}`)\n    }\n}"],"names":["$bpxeT","parcelRequire","$97b247ef5e52a8fa$var$refs","formEL","document","querySelector","galleryListEl","loadMoreBtn","$97b247ef5e52a8fa$var$simple","$parcel$interopDefault","$5IjG7","$97b247ef5e52a8fa$var$pixabayApi","$6ejHK","PixabayAPI","$97b247ef5e52a8fa$var$_onFormElSubmit","$2TvXO","mark","_callee","event","data","preventDefault","q","target","elements","searchQuery","value","trim","page","$6JpON","Notify","failure","classList","add","getGalleryCard","_ctx","sent","total","reset","innerHTML","$3CGxe","galleryTemplate","hits","refresh","success","concat","totalHits","remove","console","log","t0","apply","this","arguments","$97b247ef5e52a8fa$var$_onloadMoreBtnClick","ref","cardHeight","insertAdjacentHTML","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","Math","floor","per_page","info","addEventListener"],"version":3,"file":"index.5cbc7eb7.js.map"}